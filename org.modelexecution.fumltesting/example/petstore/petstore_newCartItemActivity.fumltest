import Model.structure.*
import Model.behavior.*

scenario TestData[
	object cart : Cart{}
	object product : Product{}
	object item : Item{unitCost = 100;}
	object cartItem : CartItem{quantity=5;}
	link cartItem_item{source cartItem=cartItem; target item=item;}
]

test newCartItemTest activity NewCartItemActivity(catalogItem=TestData.item, quantity=10){
	var cartItem = cartItem;
	
	assertOrder NewCartItemActivity.init, NewCartItemActivity.createCartItem, 
		NewCartItemActivity.setItem, NewCartItemActivity.setQuantity, NewCartItemActivity.final;
	
	assertState always before NewCartItemActivity.createCartItem{
		cartItem = null;
	}
	assertState exactly before NewCartItemActivity.createCartItem{
		cartItem = null;
	}
	assertState always after NewCartItemActivity.createCartItem{
		cartItem != null;
	}
	assertState exactly after NewCartItemActivity.createCartItem{
		cartItem != null;
	}
	
	assertState always before NewCartItemActivity.setItem{
		cartItem::item = null;
	}
	assertState exactly before NewCartItemActivity.setItem{
		cartItem::item = null;
	}
	assertState always after NewCartItemActivity.setItem{
		cartItem::item != null;
	}
	assertState exactly after NewCartItemActivity.setItem{
		cartItem::item != null;
	}
}