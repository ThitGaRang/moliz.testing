import petstore.data.*
import petstore.logic.*

scenario TestData[
	object customerServiceTD: CustomerService{}
	
	object customerTD: Customer{
		Customer.firstname='user'; 
		Customer.lastname='userLastName';
		Customer.email='user@test.com';
		Customer.login='user';
		Customer.password='password';
	}
]

test loginTest activity CustomerService.Login(Login.login='user', Login.password='password') on TestData.customerServiceTD{
	finally{
		Login.customer != null;
	}
}

test checkCredentials activity CustomerService.CheckCredentials(CheckCredentials.customer=TestData.customerTD, CheckCredentials.login='user', CheckCredentials.password='password'){
	assertOrder CheckCredentials.customerFork, CheckCredentials.getLogin, CheckCredentials.loginEquals, 
		CheckCredentials.loginDecision, *, CheckCredentials.success;
		
	assertOrder _, CheckCredentials.getLogin, _, CheckCredentials.loginDecision, *, CheckCredentials.success;
	
	finally{
		CheckCredentials.corresponds = true;
	}
}