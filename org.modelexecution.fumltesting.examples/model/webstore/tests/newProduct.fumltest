import webstore.structure.*
import webstore.behavior.*

test newProductTest activity NewProductActivity(name="testProduct"){
	
	assertOrder *, NewProductActivity.createProduct, *, NewProductActivity.setAvailable, *, 
		NewProductActivity.setName, * , NewProductActivity.setCode, NewProductActivity.final;
	
	//action: createProduct operator: after
	assertState always after action NewProductActivity.createProduct{ 
		product != null;
		check 'ProductCreated', 'NumberOfProducts';
	}
	assertState always after constraint 'ProductCreated'{
		product != null;
		check 'NumberOfProducts';
	}
	assertState eventually after action NewProductActivity.createProduct{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState eventually after constraint 'ProductCreated'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState immediately after action NewProductActivity.createProduct{
		product != null;
		product::available = null;
		product::name=null;
		product::code=null;
		
		check 'NumberOfProducts', 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState immediately after constraint 'ProductCreated'{
		product != null;
		product::available = null;
		product::name=null;
		product::code=null;
		
		check 'NumberOfProducts', 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState sometimes after action NewProductActivity.createProduct{
		product != null;
		
		product::available = null;
		product::name=null;
		product::code=null;
		
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts';
		check 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
		check 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState sometimes after constraint 'ProductCreated'{
		product != null;
		
		product::available = null;
		product::name=null;
		product::code=null;
		
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts';
		check 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
		check 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	
	//action: createProduct operator: until
	assertState always until action NewProductActivity.createProduct{ 
		product = null;
	}
	assertState always until constraint 'ProductCreated'{ 
		product = null;
	}
	assertState eventually until action NewProductActivity.createProduct{ 
		product = null;
	}
	assertState eventually until constraint 'ProductCreated'{ 
		product = null;
	}
	assertState immediately until action NewProductActivity.createProduct{ 
		product = null;
	}
	assertState immediately until constraint 'ProductCreated'{ 
		product = null;
	}
	assertState sometimes until action NewProductActivity.createProduct{ 
		product = null;
	}
	assertState sometimes until constraint 'ProductCreated'{ 
		product = null;
	}
	
	//action: setAvailable operator: after
	assertState always after action NewProductActivity.setAvailable{
		product != null;
		product::available = true;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable';
	}
	assertState always after constraint 'ProductAvailable'{
		product != null;
		product::available = true;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable';
	}
	assertState eventually after action NewProductActivity.setAvailable{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState eventually after constraint 'ProductAvailable'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState immediately after action NewProductActivity.setAvailable{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState immediately after constraint 'ProductAvailable'{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState sometimes after action NewProductActivity.setAvailable{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts';
		check 'ProductNameNotSet', 'ProductCodeNotSet';		
		check 'ProductAvailable', 'ProductName', 'ProductCode';		
	}
	assertState sometimes after constraint 'ProductAvailable'{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts';
		check 'ProductNameNotSet', 'ProductCodeNotSet';		
		check 'ProductAvailable', 'ProductName', 'ProductCode';		
	}
	
	//action: setAvailable operator: until
	assertState always until action NewProductActivity.setAvailable{
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always until constraint 'ProductAvailable'{
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always after action NewProductActivity.createProduct until action NewProductActivity.setAvailable{
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always after action NewProductActivity.createProduct until constraint 'ProductAvailable'{
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always after constraint 'ProductCreated' until action NewProductActivity.setAvailable{
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always after constraint 'ProductCreated' until constraint 'ProductAvailable'{
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState eventually until action NewProductActivity.setAvailable{
		product != null;
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState eventually until constraint 'ProductAvailable'{
		product != null;
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState immediately until action NewProductActivity.setAvailable{
		product != null;
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState immediately until constraint 'ProductAvailable'{
		product != null;
		product::available = null;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState sometimes until action NewProductActivity.setAvailable{
		product != null;
		product::available = null;
		product::name = null;
		product::code = null;
		
		product = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';		
	}
	assertState sometimes until constraint 'ProductAvailable'{
		product != null;
		product::available = null;
		product::name = null;
		product::code = null;
		
		product = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailableNotSet', 'ProductNameNotSet', 'ProductCodeNotSet';		
	}
	
	//action: setName operator: after
	assertState always after action NewProductActivity.setName{
		product != null;
		product::available = true;
		product::name = "testProduct";
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName';
	}
	assertState always after constraint 'ProductName'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName';
	}
	assertState eventually after action NewProductActivity.setName{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState eventually after constraint 'ProductName'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState immediately after action NewProductActivity.setName{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
	}
	assertState immediately after constraint 'ProductName'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
	}
	assertState sometimes after action NewProductActivity.setName{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
		check 'ProductCode';
	}
	assertState sometimes after constraint 'ProductName'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
		check 'ProductCode';
	}
	
	//action: setName operator: until
	assertState always until action NewProductActivity.setName{
		product::name = null;
		product::code = null;
		
		check 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always until constraint 'ProductName'{
		product::name = null;
		product::code = null;
		
		check 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always after action NewProductActivity.createProduct until action NewProductActivity.setName{
		product::name = null;
		product::code = null;
		
		check 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always after constraint 'ProductCreated' until action NewProductActivity.setName{
		product::name = null;
		product::code = null;
		
		check 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always after action NewProductActivity.createProduct until constraint 'ProductName'{
		product::name = null;
		product::code = null;
		
		check 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState always after constraint 'ProductCreated' until constraint 'ProductName'{
		product::name = null;
		product::code = null;
		
		check 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState eventually until action NewProductActivity.setName{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState eventually until constraint 'ProductName'{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState immediately until action NewProductActivity.setName{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState immediately until constraint 'ProductName'{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductNameNotSet', 'ProductCodeNotSet';
	}
	assertState sometimes until action NewProductActivity.setName{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		product = null;
		product::available = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductNameNotSet', 'ProductCodeNotSet';
		check 'ProductAvailableNotSet';
	}
	assertState sometimes until constraint 'ProductName'{
		product != null;
		product::available = true;
		product::name = null;
		product::code = null;
		
		product = null;
		product::available = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductNameNotSet', 'ProductCodeNotSet';
		check 'ProductAvailableNotSet';
	}
	
	//action: setCode operator: after
	assertState always after action NewProductActivity.setCode{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState always after constraint 'ProductCode'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState eventually after action NewProductActivity.setCode{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState eventually after constraint 'ProductCode'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState immediately after action NewProductActivity.setCode{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState immediately after constraint 'ProductCode'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState sometimes after action NewProductActivity.setCode{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	assertState sometimes after constraint 'ProductCode'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
	
	//action: setCode operator: until
	assertState always until action NewProductActivity.setCode{
		product::code = null;
		check 'ProductCodeNotSet';
	}
	assertState always until constraint 'ProductCode'{
		product::code = null;
		check 'ProductCodeNotSet';
	}
	assertState always after action NewProductActivity.createProduct until action NewProductActivity.setCode{
		product::code = null;
		check 'ProductCodeNotSet';
	}
	assertState always after constraint 'ProductCreated' until action NewProductActivity.setCode{
		product::code = null;
		check 'ProductCodeNotSet';
	}
	assertState always after action NewProductActivity.createProduct until constraint 'ProductCode'{
		product::code = null;
		check 'ProductCodeNotSet';
	}
	assertState always after constraint 'ProductCreated' until constraint 'ProductCode'{
		product::code = null;
		check 'ProductCodeNotSet';
	}
	assertState eventually until action NewProductActivity.setCode{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
	}
	assertState eventually until constraint 'ProductCode'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
	}
	assertState immediately until action NewProductActivity.setCode{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
	}
	assertState immediately until constraint 'ProductCode'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
	}
	assertState sometimes until action NewProductActivity.setCode{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = null;
		
		product = null;
		product::available = null;
		product::name = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
		check 'ProductAvailableNotSet', 'ProductNameNotSet';
	}
	assertState sometimes until constraint 'ProductCode'{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = null;
		
		product = null;
		product::available = null;
		product::name = null;
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCodeNotSet';
		check 'ProductAvailableNotSet', 'ProductNameNotSet';
	}
	
	finally{
		product != null;
		product::available = true;
		product::name = "testProduct";
		product::code = 12345;		
		
		check 'ProductCreated', 'NumberOfProducts', 'ProductAvailable', 'ProductName', 'ProductCode';
	}
}